<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Tu Ti√™n Gi·ªõi ‚Ä¢ ƒê·∫°i S·∫£nh</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@900&family=Noto+Sans+SC:wght@500;700;900&display=swap');

    :root{
      --cyan: #7be4ff;
      --purple: #d4b3ff;
      --gold: #ffd37b;
      --dark: #030a1a;
    }
    *{margin:0;padding:0;box-sizing:border-box}
    body{
      height:100vh;
      background: radial-gradient(circle at 20% 30%, rgba(123,228,255,0.25), transparent 50%),
                  radial-gradient(circle at 80% 70%, rgba(255,211,123,0.2), transparent 50%),
                  #030a1a;
      font-family:'Noto Sans SC', sans-serif;
      color:white;overflow:hidden;position:relative;
    }
    canvas{position:absolute;inset:0;z-index:1}

    .main-hall{
      position:relative;z-index:10;
      width:100%;height:100%;
      display:grid;
      grid-template-rows: 140px 1fr 120px;
      padding:20px;
      gap:15px;
    }

    /* HEADER - gi·ªØ nguy√™n ƒë·∫πp nh∆∞ c≈© */
    .header{
      display:flex;justify-content:space-between;align-items:center;
      padding:0 30px;
      background:rgba(3,10,26,0.6);
      border:2px solid rgba(123,228,255,0.4);
      border-radius:25px;
      backdrop-filter:blur(10px);
      position:relative;
    }
    .avatar{
      width:100px;height:100px;
      border-radius:50%;
      object-fit:cover;
      border:4px solid var(--cyan);
      box-shadow:0 0 50px rgba(123,228,255,0.8);
      cursor:pointer;
      animation:float 6s ease-in-out infinite;
    }
    .player-info{text-align:center;flex:1;}
    .dao-hieu{
      font-size:42px;font-weight:900;letter-spacing:4px;
      background:linear-gradient(90deg,#fff,var(--cyan),var(--gold));
      -webkit-background-clip:text;background-clip:text;color:transparent;
    }
    .level{
      font-size:28px;margin-top:8px;
      background:linear-gradient(90deg,var(--purple),var(--gold));
      -webkit-background-clip:text;background-clip:text;color:transparent;
    }

    /* N√∫t Setting m·ªõi - l∆° l·ª≠ng b√™n ph·∫£i */
    .settings-btn{
      position:absolute;top:50%;right:30px;transform:translateY(-50%);
      width:70px;height:70px;
      background:linear-gradient(135deg,var(--purple),var(--gold));
      border-radius:50%;
      display:flex;align-items:center;justify-content:center;
      font-size:38px;cursor:pointer;
      box-shadow:0 0 50px rgba(212,179,255,0.7);
      animation:float 6s ease-in-out infinite;
      z-index:20;
      transition:all .4s;
    }
    .settings-btn:hover{transform:translateY(-50%) scale(1.2) rotate(90deg);}

    /* MENU CH√çNH - gi·ªØ nguy√™n 6 √¥ ƒë·∫πp nh∆∞ c≈© */
    .menu-grid{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:25px;
      max-width:1100px;
      margin:0 auto;
    }
    .menu-btn{
      aspect-ratio:1;
      background:rgba(3,10,26,0.7);
      border:3px solid var(--cyan);
      border-radius:30px;
      display:flex;flex-direction:column;align-items:center;justify-content:center;
      cursor:pointer;
      transition:all .4s;
      box-shadow:0 0 40px rgba(123,228,255,0.3);
      position:relative;overflow:hidden;
    }
    .menu-btn::before{
      content:'';position:absolute;inset:0;
      background:linear-gradient(135deg,transparent 30%,rgba(123,228,255,0.2));
      transform:translateX(-100%);transition:transform .6s;
    }
    .menu-btn:hover::before{transform:translateX(100%);}
    .menu-btn:hover{
      transform:translateY(-15px) scale(1.05);
      border-color:var(--gold);
      box-shadow:0 20px 70px rgba(255,215,123,0.6);
    }
    .menu-icon{font-size:70px;margin-bottom:15px;text-shadow:0 0 30px var(--cyan);}
    .menu-text{
      font-size:26px;font-weight:900;letter-spacing:3px;
      background:linear-gradient(90deg,var(--cyan),var(--gold));
      -webkit-background-clip:text;background-clip:text;color:transparent;
    }

    /* N√∫t m≈©i t√™n tho√°t Setting - ƒë·∫πp nh∆∞ Tu Luy·ªán Chi ƒê·ªãa */
.close-setting-btn{
  position:absolute;
  top:20px;
  left:20px;
  width:70px;
  height:70px;
  background:linear-gradient(135deg, #ff9eca, #c9fffc);
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:40px;
  font-weight:bold;
  color:#333;
  cursor:pointer;
  box-shadow:0 0 60px rgba(255,105,180,0.8);
  transition:all .3s;
  z-index:100;
}
.close-setting-btn:hover{
  transform:scale(1.15);
  box-shadow:0 0 90px rgba(255,105,180,1);
}
.close-setting-btn:active{
  transform:scale(0.95);
}

/* ƒê·∫£m b·∫£o panel setting kh√¥ng b·ªã tr√†n n√∫t */
.setting-panel{
  position:relative;
  width:90%;
  max-width:540px;
  padding:50px 40px 40px; /* TƒÉng padding-top ƒë·ªÉ ch·ª´a ch·ªó cho n√∫t */
}

    /* FOOTER - gi·ªØ nguy√™n */
    .footer{
      display:flex;justify-content:space-between;align-items:center;
      padding:0 40px;
      background:rgba(3,10,26,0.6);
      border:2px solid rgba(123,228,255,0.3);
      border-radius:25px;
      backdrop-filter:blur(10px);
    }
    .task-bar{
      flex:1;margin:0 30px;
      padding:15px 30px;
      background:rgba(212,179,255,0.15);
      border-radius:50px;
      font-size:22px;letter-spacing:2px;
      text-align:center;
      animation:pulse 4s infinite;
    }
    .quick-btn{
      width:80px;height:80px;
      background:linear-gradient(135deg,var(--purple),var(--gold));
      border-radius:50%;
      display:flex;align-items:center;justify-content:center;
      font-size:40px;
      cursor:pointer;
      box-shadow:0 0 40px rgba(212,179,255,0.7);
      transition:all .4s;
    }
    .quick-btn:hover{transform:scale(1.2) rotate(20deg);}

    /* POPUP SETTING - ƒë·∫πp lung linh */
    .overlay{
      position:fixed;inset:0;background:rgba(0,0,0,0.9);z-index:999;
      display:none;align-items:center;justify-content:center;
    }
    .setting-panel{
      width:90%;max-width:520px;
      background:rgba(3,10,26,0.95);
      border:3px solid var(--cyan);
      border-radius:35px;
      padding:40px;
      text-align:center;
      box-shadow:0 0 100px rgba(123,228,255,0.7);
      animation:float 8s ease-in-out infinite;
    }
    .setting-title{
      font-family:'Cinzel Decorative',serif;
      font-size:60px;margin-bottom:30px;
      background:linear-gradient(90deg,var(--cyan),var(--purple),var(--gold));
      -webkit-background-clip:text;background-clip:text;color:transparent;
    }
    .setting-item{margin:25px 0;}
    input[type="file"],input[type="text"]{
      width:100%;padding:16px;
      background:rgba(255,255,255,0.1);
      border:2px solid var(--cyan);
      border-radius:50px;color:white;font-size:18px;
    }
    .btn-small{
      padding:14px 40px;margin:8px;
      font-size:20px;font-weight:900;letter-spacing:3px;
      border:none;border-radius:50px;cursor:pointer;
    }
    .btn-gift{background:var(--gold);color:#000;}
    .btn-logout{background:#ff6b6b;color:white;}
    .social-links{
      display:flex;justify-content:center;gap:25px;margin-top:35px;
    }
    .social-btn{
      width:70px;height:70px;
      background:linear-gradient(135deg,var(--cyan),var(--purple));
      border-radius:50%;display:flex;align-items:center;justify-content:center;
      font-size:36px;box-shadow:0 0 40px rgba(123,228,255,0.6);
      cursor:pointer;
    }
    @keyframes pulse{0%,100%{box-shadow:0 0 20px rgba(212,179,255,0.4)}50%{box-shadow:0 0 40px rgba(212,179,255,0.8)}}

    @media(max-width:1024px){.menu-grid{grid-template-columns:repeat(2,1fr);}}
    @media(max-width:768px){
      .header{flex-direction:column;gap:20px;padding:20px}
      .settings-btn{right:auto;transform:none;position:static;margin:10px;}
      .menu-grid{grid-template-columns:1fr 1fr;}
      .footer{flex-direction:column;gap:15px;padding:20px}
      .task-bar{margin:10px 0;}
    }
  </style>
</head>
<body>

  <canvas id="stars"></canvas>

  <div class="main-hall">

    <!-- Header -->
    <div class="header">
      <img src="" id="playerAvatar" class="avatar" alt="Avatar" onclick="document.getElementById('avatarInput').click()">
      <div class="player-info">
        <div class="dao-hieu" id="playerName">ƒêang t·∫£i ƒë·∫°o hi·ªáu...</div>
        <div class="level">Luy·ªán Kh√≠ t·∫ßng 1 ‚Ä¢ Linh l·ª±c: 999</div>
      </div>
      <div class="settings-btn" onclick="openSetting()">‚öô</div>
    </div>

    <!-- Menu 6 √¥ -->
 <div class="menu-grid">
  <div class="menu-btn" onclick="goToChinh('congphap.html')">
    <div class="menu-icon">Êõ∏</div><div class="menu-text">C√îNG PH√ÅP</div>
  </div>
  <div class="menu-btn" onclick="goToChinh('tuluyen.html')">
    <div class="menu-icon">Ê∞£</div><div class="menu-text">Tu Luy·ªán</div>
  </div>
  <div class="menu-btn" onclick="goToChinh('phoban.html')">
    <div class="menu-icon">È≠î</div><div class="menu-text">PH√ì B·∫¢N</div>
  </div>
  <div class="menu-btn" onclick="goToChinh('thuongdiem.html')">
    <div class="menu-icon">ÂØ∂</div><div class="menu-text">TH∆Ø∆†NG ƒêI·∫æM</div>
  </div>
  <div class="menu-btn" onclick="goToChinh('bangxephang.html')">
    <div class="menu-icon">Ê¶ú</div><div class="menu-text">B·∫¢NG X·∫æP H·∫†NG</div>
  </div>
  <div class="menu-btn" onclick="goToChinh('tongmon.html')">
    <div class="menu-icon">ÂÆó</div><div class="menu-text">T√îNG M√îN</div>
  </div>
</div>

    <!-- Footer -->
    <div class="footer">
      <div class="quick-btn">Ë¢ã</div>
      <div class="task-bar">Nhi·ªám v·ª• ch√≠nh: Thu th·∫≠p 10 g·ªëc Linh Th·∫£o c·∫•p 1 (0/10)</div>
      <div class="quick-btn">ËÅä</div>
    </div>
  </div>

 <!-- THAY TO√ÄN B·ªò PH·∫¶N SETTING HI·ªÜN T·∫†I B·∫∞NG ƒêO·∫†N N√ÄY -->
<div class="overlay" id="settingOverlay">
  <div class="setting-panel">
    <!-- N√öT M≈®I T√äN THO√ÅT SETTING -->
    <div class="close-setting-btn" onclick="closeSetting()">‚Üê</div>

    <h2 class="setting-title">C√ÄI ƒê·∫∂T</h2>

    <div class="setting-item">
      <label style="font-size:20px;margin-bottom:10px;display:block;">ƒê·ªïi Avatar</label>
      <input type="file" id="avatarInput" accept="image/*" onchange="changeAvatar(event)">
    </div>

    <div class="setting-item">
      <button class="btn-small" id="soundBtn" onclick="toggleSound()" style="background:var(--cyan);color:#000;">
        √Çm thanh: ON
      </button>
    </div>

    <div class="setting-item">
      <input type="text" id="giftcode" placeholder="Nh·∫≠p Giftcode...">
      <button class="btn-small btn-gift" onclick="redeemCode()">NH·∫¨N TH∆Ø·ªûNG</button>
    </div>

    <button class="btn-small btn-logout" onclick="logout()">ƒêƒÇNG XU·∫§T</button>

    <div class="social-links">
      <div class="social-btn" onclick="window.open('https://fb.com/tutienGioi','_blank')">f</div>
      <div class="social-btn" onclick="window.open('https://youtube.com/@tutienGioi','_blank')">‚ñ∂</div>
      <div class="social-btn" onclick="window.open('https://zalo.me/g/tutienGioi','_blank')">üí¨</div>
    </div>
  </div>
</div>
<!-- N√öT ADMIN ·∫®N ‚Äì CH·ªà HI·ªÜN KHI NH·∫¨P M·∫¨T KH·∫®U ƒê√öNG TRONG CONSOLE HO·∫∂C NH·∫§N T·ªî H·ª¢P PH√çM -->
<div class="admin-secret-btn" id="adminSecretBtn" style="display:none;" onclick="window.open('admin.html','_blank')">
  <div style="position:fixed;top:10px;right:10px;z-index:9999;width:60px;height:60px;background:linear-gradient(135deg,#ff006e,#8338ec);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:32px;box-shadow:0 0 60px #ff006e;cursor:pointer;animation:pulse 2s infinite;">Áßò</div>
</div>

<script>
  
// T·ªï h·ª£p ph√≠m b√≠ m·∫≠t: g√µ "admin2025" ƒë·ªÉ hi·ªán n√∫t
let adminCode = '';
document.addEventListener('keydown', e => {
  adminCode += e.key;
  if(adminCode.includes('admin2025')){
    document.getElementById('adminSecretBtn').style.display = 'block';
    adminCode = '';
  }
  if(adminCode.length > 20) adminCode = '';
});
// === H·ªÜ TH·ªêNG GHI LOG TH·ª∞C T·∫æ CHO SERVER ===
function addRealLog(action) {
  const name = localStorage.getItem('currentUser') || 'Kh√°ch';
  const time = new Date().toLocaleTimeString('vi-VN', {hour:'2-digit', minute:'2-digit', second:'2-digit'});
  const page = location.pathname.split('/').pop() || 'main.html';
  const logEntry = `[${time}] ${name} ${action} t·∫°i ${page}`;
  
  let logs = JSON.parse(localStorage.getItem('tuTienServerLog') || '[]');
  logs.unshift(logEntry);
  if(logs.length > 500) logs = logs.slice(0, 500); // gi·ªØ t·ªëi ƒëa 500 d√≤ng
  localStorage.setItem('tuTienServerLog', JSON.stringify(logs));
}

// G·ªçi ngay khi trang load
addRealLog('v·ª´a truy c·∫≠p');
window.addEventListener('beforeunload', () => addRealLog('r·ªùi kh·ªèi trang'));
</script>
  <script>
    // Ki·ªÉm tra c√≥ b·ªã c·∫•m kh√¥ng (t∆∞∆°ng lai m·ªü r·ªông)
const bannedUsers = JSON.parse(localStorage.getItem('bannedUsers') || '{}');
if(bannedUsers[currentUser]){
  alert('ƒê·∫°o h·ªØu ƒë√£ b·ªã phong b·∫ø linh cƒÉn! Li√™n h·ªá Ch∆∞·ªüng M√¥n!');
  localStorage.removeItem('currentUser');
  window.location.href = 'index.html';
}
    // Starfield
    const canvas = document.getElementById('stars');
    const ctx = canvas.getContext('2d');
    let w = canvas.width = innerWidth;
    let h = canvas.height = innerHeight;
    const stars = [];
    for(let i=0;i<1200;i++){
      stars.push({x:Math.random()*w,y:Math.random()*h,r:Math.random()*2,a:Math.random()*0.8+0.2});
    }
    function draw(){
      ctx.clearRect(0,0,w,h);
      stars.forEach(s=>{
        ctx.fillStyle=`rgba(255,255,255,${s.a})`;
        ctx.beginPath();ctx.arc(s.x,s.y,s.r,0,Math.PI*2);ctx.fill();
      });
      requestAnimationFrame(draw);
    }
    draw();
    window.addEventListener('resize',()=>{w=canvas.width=innerWidth;h=canvas.height=innerHeight;});
    // √Çm thanh
    let soundOn = localStorage.getItem('soundOn') !== 'false';
    document.getElementById('soundBtn').textContent = soundOn ? '√Çm thanh: ON' : '√Çm thanh: OFF';

    // Setting functions
    function openSetting(){ document.getElementById('settingOverlay').style.display = 'flex'; }
    function closeSetting(){ document.getElementById('settingOverlay').style.display = 'none'; }
    window.addEventListener('click', e => {
      if(e.target === document.getElementById('settingOverlay')) closeSetting();
    });

    function changeAvatar(e){
      const file = e.target.files[0];
      if(file){
        const reader = new FileReader();
        reader.onload = ev => {
          const url = ev.target.result;
          avatarImg.src = url;
          localStorage.setItem('playerAvatar', url);
        };
        reader.readAsDataURL(file);
      }
    }

    function toggleSound(){
      soundOn = !soundOn;
      localStorage.setItem('soundOn', soundOn);
      document.getElementById('soundBtn').textContent = soundOn ? '√Çm thanh: ON' : '√Çm thanh: OFF';
    }

    function redeemCode(){
      const code = document.getElementById('giftcode').value.trim();
      if(!code) return alert('H√£y nh·∫≠p giftcode!');
      document.getElementById('giftcode').value = '';
    }

    function logout(){
      if(confirm('ƒê·∫°o h·ªØu th·∫≠t s·ª± mu·ªën r·ªùi Ti√™n Gi·ªõi?')){
        localStorage.removeItem('currentUser');
        localStorage.removeItem('playerAvatar');
        window.location.href = 'index.html';
      }
    }
function goToChinh(page) {
  document.body.style.transition = 'opacity 1s';
  document.body.style.opacity = '0';
  setTimeout(() => {
    window.location.href = '../chinh/' + page;  // v·∫´n gi·ªØ nguy√™n v√¨ folder chinh kh√¥ng ƒë·ªïi
  }, 1100);
}

</script>
<script>
// ==================== H·ªÜ TH·ªêNG D·ªÆ LI·ªÜU TH·ª∞C + REAL-TIME (CH·ªà D√ÅN 1 L·∫¶N DUY NH·∫§T) ====================
const currentUser = localStorage.getItem('currentUser') || 'V√¥ Danh Ti√™n';

// T·∫°o ng∆∞·ªùi ch∆°i m·ªõi n·∫øu ch∆∞a c√≥ (tr·∫Øng tinh)
if (!localStorage.getItem('playerData_' + currentUser)) {
  const newPlayer = {
    name: currentUser,
    realm: "Luy·ªán Kh√≠ t·∫ßng 1",
    power: 100,
    stone: 0,
    exp: 0,
    expMax: 100
  };
  localStorage.setItem('playerData_' + currentUser, JSON.stringify(newPlayer));
}

// Load d·ªØ li·ªáu th·ª±c t·∫ø l√™n giao di·ªán
function loadPlayerData() {
  const data = JSON.parse(localStorage.getItem('playerData_' + currentUser) || '{}');
  
  document.getElementById('playerName').textContent = data.name || currentUser;
  document.querySelector('.level').textContent = `${data.realm || 'Luy·ªán Kh√≠ t·∫ßng 1'} ‚Ä¢ Linh l·ª±c: ${(data.power || 0).toLocaleString()}`;
  
  // C·∫≠p nh·∫≠t task-bar (footer)
  const taskBar = document.querySelector('.task-bar');
  if (taskBar) {
    taskBar.innerHTML = `Linh Th·∫°ch: <b>${(data.stone || 0).toLocaleString()}</b> ‚Ä¢ Linh L·ª±c: <b>${(data.power || 0).toLocaleString()}</b>`;
  }
}

// REAL-TIME: Admin s·ª≠a l√† hi·ªán ngay (d√π kh√¥ng reload)
window.addEventListener('storage', (e) => {
  if (e.key === 'playerData_' + currentUser) {
    loadPlayerData();
  }
});

// Load l·∫ßn ƒë·∫ßu + auto refresh d·ª± ph√≤ng
loadPlayerData();
setInterval(loadPlayerData, 4000);

// Avatar (gi·ªØ nguy√™n)
const avatarImg = document.getElementById('playerAvatar');
const savedAvatar = localStorage.getItem('playerAvatar');
if(savedAvatar) avatarImg.src = savedAvatar;
else avatarImg.src = 'https://i.ibb.co.com/9bY8YhL/default-avatar.png';

function changeAvatar(e){
  const file = e.target.files[0];
  if(file){
    const reader = new FileReader();
    reader.onload = ev => {
      const url = ev.target.result;
      avatarImg.src = url;
      localStorage.setItem('playerAvatar', url);
    };
    reader.readAsDataURL(file);
  }
}

// Setting + c√°c h√†m c≈© v·∫´n d√πng b√¨nh th∆∞·ªùng
function openSetting(){ document.getElementById('settingOverlay').style.display='flex'; }
function closeSetting(){ document.getElementById('settingOverlay').style.display='none'; }
window.addEventListener('click', e => { if(e.target === document.getElementById('settingOverlay')) closeSetting(); });

// Gi·ªØ nguy√™n c√°c h√†m c≈©
function toggleSound(){
  const soundOn = localStorage.getItem('soundOn') !== 'false';
  localStorage.setItem('soundOn', !soundOn);
  document.getElementById('soundBtn').textContent = !soundOn ? '√Çm thanh: ON' : '√Çm thanh: OFF';
}
function redeemCode(){
  const code = document.getElementById('giftcode').value.trim();
  if(!code) return alert('H√£y nh·∫≠p giftcode!');
  alert('Giftcode ch∆∞a c√≥ hi·ªáu l·ª±c ho·∫∑c sai! (S·∫Ω update sau)');
  document.getElementById('giftcode').value = '';
}
function logout(){
  if(confirm('ƒê·∫°o h·ªØu th·∫≠t s·ª± mu·ªën r·ªùi Ti√™n Gi·ªõi?')){
    localStorage.removeItem('currentUser');
    localStorage.removeItem('playerAvatar');
    window.location.href = 'index.html';
  }
}
function goToChinh(page) {
  document.body.style.transition = 'opacity 1s';
  document.body.style.opacity = '0';
  setTimeout(() => {
    window.location.href = '../chinh/' + page;
  }, 1100);
}

// Log + admin n√∫t b√≠ m·∫≠t (gi·ªØ nguy√™n)
addRealLog('v·ª´a truy c·∫≠p');
</script>
</body>
</html>